<div class="news-carousel-section">
  <div class="section-title-block">
    <div class="section-title-header">
      <div class="section-title-content">
        <h1>{{ title }}</h1>
        <h3>{{ subtitle }}</h3>
        <p>{{ slogan }}</p>
        <div class="section-title-divider"></div>
      </div>
      <div class="carousel-controls">
        <button class="carousel-btn left" onclick="newsCarouselScroll(this, 1)"></button>
        <button class="carousel-btn right" onclick="newsCarouselScroll(this, -1)"></button>
      </div>
    </div>
  </div>
  <div class="news-carousel">
    <div class="carousel-track-wrapper">
      <div class="carousel-track">
        {% set lines = items | split(pat="\n") %}
        {% for line in lines %}
          {% set line = line | trim %}
          {% if line != "" %}
            {% set parts = line | split(pat="|") %}
            {% set news_title = parts[0] | trim %}
            {% if parts | length > 1 %}
              {% set news_link = parts[1] | trim %}
            {% else %}
              {% set news_link = "" %}
            {% endif %}
            {% if parts | length > 2 %}
              {% set news_img = parts[2] | trim %}
            {% else %}
              {% set news_img = "" %}
            {% endif %}
            {% if parts | length > 3 %}
              {% set news_summary = parts[3] | trim %}
            {% else %}
              {% set news_summary = "" %}
            {% endif %}
            <div class="carousel-card">
              <a href="{{ news_link }}">
                <img src="{{ news_img }}" alt="{{ news_title }}" class="carousel-card-img">
                <div class="carousel-card-content">
                  <h3 class="carousel-card-title">{{ news_title }}</h3>
                  <p class="carousel-card-date">{{ news_summary }}</p>
                </div>
              </a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    <div class="carousel-body">
      {{ body | safe }}
    </div>
  </div>
</div>
<script src="/js/news_carousel.js"></script>